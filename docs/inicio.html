<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de eventos</title>

  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="gate" style="max-width:340px; width:100%; margin-bottom:12px;"></div>
  <nav style="margin-bottom:15px;">
  <a href="inicio.html">Inicio</a> |
  <a href="precios.html">Precios</a> |
  <a href="faq.html">FAQ</a> |
  <a href="registro.html">Registro</a>
  <a href="perfil.html">Perfil</a>
</nav>

  <form id="calculatorForm">
    <label>Licencia:</label>
    <input type="number" id="license" placeholder="Introduce tu calca">

    <label>Día y Hora:</label>
    <input type="datetime-local" id="dateTime">

    <label>Recogida:</label>
    <input type="text" id="recogida" placeholder="Ciudad o punto de interés">

    <label>Destino:</label>
    <input type="text" id="destino" placeholder="Ciudad o punto de interés">

    <label>Km Ida:</label>
    <input type="number" id="kmIda" placeholder="Solo ida">

    <label>Peajes Ida:</label>
    <input type="number" id="peajesIda" placeholder="Solo ida">

    <label>Espera (min):</label>
    <input type="number" id="tiempoEspera" placeholder="En minutos">

    <input type="checkbox" id="recogidaAero"> Recogida Aeropuerto<br>
    <input type="checkbox" id="recogidaSants"> Recogida Sants<br>
    <input type="checkbox" id="sietePlazas"> Servicio 7 plazas<br><br>

    <button type="button" onclick="calcularCoste()">Calcular</button>
  </form>

  <div id="result"></div>

  <div class="info-mail">
    Hacer captura y enviar a:<br>
    <a href="mailto:miriam.mendez@joinup.es">miriam.mendez@joinup.es</a>
  </div>

  <footer>
    © 2026 Calculadora de Eventos · created by Arturo Balbastre
  </footer>

  <script src="auth.js"></script>
  <script>
  // Si no hay perfil completo, bloqueamos el uso
  if (typeof isProfileComplete === "function" && !isProfileComplete()) {
    const gate = document.getElementById('gate');
    gate.innerHTML = `
      <div style="border:1px solid #333; padding:10px; border-radius:8px;">
        <div class="total" style="font-size:1.1em;">Falta completar tu perfil</div>
        <div class="breakdown" style="color:#aaa;">
          Para usar la calculadora necesitas completar tus datos.
        </div>
        <div style="margin-top:10px;">
          <a href="perfil.html">Completar perfil →</a>
        </div>
      </div>
    `;

    // Desactivar el botón calcular (para que no se use)
    const btns = document.querySelectorAll('button');
    btns.forEach(b => b.disabled = true);
  }
</script>
</body>
</html>